// This file is automatically generated, please do not alter it.
// 2025-11-30 15:46:03
#pragma once

inline auto STROKE_PASS_COMP_STR =
	"#version 310 es\n"
	"layout(local_size_x = 16, local_size_y = 16, local_size_z = 1) in;\n"
	"struct Stroke\n"
	"{\n"
	"    int numCircles;\n"
	"    int startIndex;\n"
	"};\n"
	"struct Circle\n"
	"{\n"
	"    vec2 center;\n"
	"    float radius;\n"
	"};\n"
	"layout(binding = 3, std140) uniform LocalInfo\n"
	"{\n"
	"    int numStrokes;\n"
	"    int width;\n"
	"    int height;\n"
	"    float aa;\n"
	"    vec4 strokeColor;\n"
	"} localInfo;\n"
	"layout(binding = 1, std430) readonly buffer Strokes\n"
	"{\n"
	"    Stroke strokes[];\n"
	"} strokesBuf;\n"
	"layout(binding = 0, std430) readonly buffer Circles\n"
	"{\n"
	"    Circle circles[];\n"
	"} circlesBuf;\n"
	"layout(binding = 2, rgba8) uniform writeonly highp image2D outputImage;\n"
	"float edgeAlpha(float dist, float radius, float aa)\n"
	"{\n"
	"    float delta = radius - dist;\n"
	"    if (delta >= aa)\n"
	"    {\n"
	"        return 1.0;\n"
	"    }\n"
	"    if (delta <= 0.0)\n"
	"    {\n"
	"        return 0.0;\n"
	"    }\n"
	"    return delta / aa;\n"
	"}\n"
	"vec4 blendMax(vec4 a, vec4 b)\n"
	"{\n"
	"    return vec4(max(a.xyz, b.xyz), max(a.w, b.w));\n"
	"}\n"
	"vec4 blendAlpha(vec4 src, vec4 dst)\n"
	"{\n"
	"    float a = src.w + (dst.w * (1.0 - src.w));\n"
	"    if (a < 9.9999999747524270787835121154785e-07)\n"
	"    {\n"
	"        return vec4(0.0);\n"
	"    }\n"
	"    vec3 rgb = ((src.xyz * src.w) + ((dst.xyz * dst.w) * (1.0 - src.w))) / vec3(a);\n"
	"    return vec4(rgb, a);\n"
	"}\n"
	"void main()\n"
	"{\n"
	"    ivec2 pix = ivec2(gl_GlobalInvocationID.xy);\n"
	"    bool _134 = pix.x >= localInfo.width;\n"
	"    bool _145;\n"
	"    if (!_134)\n"
	"    {\n"
	"        _145 = pix.y >= localInfo.height;\n"
	"    }\n"
	"    else\n"
	"    {\n"
	"        _145 = _134;\n"
	"    }\n"
	"    if (_145)\n"
	"    {\n"
	"        return;\n"
	"    }\n"
	"    vec4 canvas = vec4(0.0);\n"
	"    Stroke stroke;\n"
	"    Circle c;\n"
	"    for (int s = 0; s < localInfo.numStrokes; s++)\n"
	"    {\n"
	"        stroke.numCircles = strokesBuf.strokes[s].numCircles;\n"
	"        stroke.startIndex = strokesBuf.strokes[s].startIndex;\n"
	"        vec4 strokePixel = vec4(0.0);\n"
	"        for (int i = 0; i < stroke.numCircles; i++)\n"
	"        {\n"
	"            int _200 = stroke.startIndex + i;\n"
	"            c.center = circlesBuf.circles[_200].center;\n"
	"            c.radius = circlesBuf.circles[_200].radius;\n"
	"            vec2 p = vec2(pix) + vec2(0.5);\n"
	"            float dist = length(p - c.center);\n"
	"            float param = dist;\n"
	"            float param_1 = c.radius;\n"
	"            float param_2 = localInfo.aa;\n"
	"            float alpha = edgeAlpha(param, param_1, param_2) * localInfo.strokeColor.w;\n"
	"            if (alpha > 0.0)\n"
	"            {\n"
	"                vec4 cCol = vec4(localInfo.strokeColor.xyz, alpha);\n"
	"                vec4 param_3 = strokePixel;\n"
	"                vec4 param_4 = cCol;\n"
	"                strokePixel = blendMax(param_3, param_4);\n"
	"            }\n"
	"        }\n"
	"        vec4 param_5 = strokePixel;\n"
	"        vec4 param_6 = canvas;\n"
	"        canvas = blendAlpha(param_5, param_6);\n"
	"        if (canvas.w == 1.0)\n"
	"        {\n"
	"            break;\n"
	"        }\n"
	"    }\n"
	"    imageStore(outputImage, pix, canvas);\n"
	"}\n"
;